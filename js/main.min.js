window.ikiToolkit=window.ikiToolkit||{},window.ikiToolkit=window.ikiToolkit||{},window.ikiToolkit.formHandler=function(i,t){"use strict";function e(){i.fn.velocity&&this.errorElements.velocity("callout.shake",{stagger:100}),this.errorElements.length=0}function n(){var t=this;this.$submitBtn.removeClass("iki-in-progress"),this.$notifText.text(this.$submitBtn.data("ikiSuccess")),this.ajaxInProgress=!1,i.fn.velocity&&this.$submitBtn.velocity("callout.pulse"),_.delay(function(){t._setupDefault()},6e3)}function o(){this.$notifText.text(this.$submitBtn.data("ikiDefault")),this.ajaxInProgress=!1,this.$submitBtn.removeClass("iki-in-progress")}function s(){this.$submitBtn.addClass("iki-in-progress"),this.$submitBtn.find(".iki-notif-text").text(this.$submitBtn.data("ikiProgress")),this.ajaxInProgress=!0}function r(i){if(i.data("ikiHasError")){var t=i.attr("name").trim();this.$form.find(".section-"+t).removeClass("iki-form-error").find(".iki-empty-notification").remove(),i.data("ikiHasError",!1)}}function a(i){var t=this._getFormSection(i);if(t.addClass("iki-form-error"),this.errorElements=this.errorElements.add(t),!i.data("ikiHasError")){var e=this.emptyNotifText;"iki-contact-answer"===i.attr("id")&&(e=this.wrongAnswerText),i.siblings("label").append('<span class="iki-empty-notification">'+e+"</span>")}i.data("ikiHasError",!0)}function c(i){var t=i.attr("name").trim();return this.$form.find(".section-"+t)}function l(t,e){var n=this;this.$form=t,this.$submitBtn=this.$form.find(".iki-form-btn"),this.$notifText=this.$submitBtn.find(".iki-notif-text"),this.ajaxInProgress=!1,this.errorElements=i([]);var o=this.$form.find(".section-iki-contact-answer").data("ikiAnswer");o&&(o=String(o).trim().toLocaleLowerCase()),this.answer=o,this.$formFields=this.$form.find(".iki-form-element"),this.$gdprCbx=i("#iki-gdpr-checkbox"),this.$gdprLabel=this.$form.find(".iki-gdpr-label"),this.emptyNotifText=n.$form.attr("data-iki-empty"),this.wrongAnswerText=n.$form.attr("data-iki-wrong-a"),this.$notificationPanel=i(".iki-notification-panel"),this.$answerField=this.$form.find("[name=iki-contact-answer]"),this.$formFields.on("focus",function(){var t=i(this);n._removeSectionError(t)}),this.$requiredFields=this.$formFields.filter("[required]"),this.$gdprCbx.length&&(this.$submitBtn.attr("disabled",!0),this.$gdprLabel.on("click",function(i){n.$submitBtn.attr("disabled",n.$gdprCbx[0].checked)}),this.$gdprCbx.on("click",function(){n.$submitBtn.attr("disabled",!n.$gdprCbx[0].checked)})),this.$submitBtn.on("click",function(t){if(t.preventDefault(),!n.ajaxInProgress){var e=!1;if(n.$requiredFields.each(function(){var t=i(this);t.val().trim()||(e=!0,n._setupSectionError(t))}),n.$answerField.length){n.$answerField.val().trim().toLocaleLowerCase()!==n.answer&&(e=!0,n._setupSectionError(n.$answerField))}e?n._animateErrors():(n.$form.submit(),n.$notificationPanel.empty(),_.defer(function(){n._setupInProgress()}))}}),this.actionUrl=e,this.$form.on("submit",function(t){t.preventDefault();var e=n.$form.serialize();i.ajax({type:"POST",url:n.actionUrl,timeout:2e4,data:{action:"iki_toolkit_validate_contact_form",formData:e,_ajax_nonce:window.ikiToolkitExports.iki_nonce,postId:window.ikiToolkitExports.post_id}}).done(function(t,e,o){t.errors||!t.success?(t.notification&&n.$notificationPanel.addClass("iki-form-error").append("<p>"+t.notification+"</p>"),_.each(t.errors,function(t,e){var o=i('<p class="iki-error-field">'+e+" : "+t+"</p>");n.$notificationPanel.append(o);var s=n.$form.find("[name="+e+"]");s.length&&n._setupSectionError(s)}),n._animateErrors(),n.$notificationPanel.slideDown("slow",function(){_.delay(function(){n.$notificationPanel.slideUp("slow",function(){n.$notificationPanel.empty()})},1e4)}),n._setupDefault()):n._setupSuccess()})})}return{init:l,_getFormSection:c,_setupSectionError:a,_removeSectionError:r,_setupInProgress:s,_setupSuccess:n,_setupDefault:o,_animateErrors:e}}(jQuery,window),jQuery(document).ready(function(i){i(".iki-slick-slider").slick(),window.ikiToolkitExports.fs_panels&&window.ikiToolkitExports.fs_panels.forEach(function(i){Object.create(window.ikiToolkit.AbstractPanel).init(i,window.ikiToolkitExports.flags.wp_customizer_active)}),i("#iki-hero-section").length&&Object.create(window.ikiToolkit.heroSection.heroContent).init(),i(".post-sharing .iki-share-btn").on("click",function(t){i(window).width()>700&&(t.preventDefault(),window.open(this.href,"share-this","height=500,width=500,status=no,toolbar=no"))});var t=i("#iki-contact-form");t.length&&Object.create(window.ikiToolkit.formHandler).init(t,window.ikiToolkitExports.adminUrl)}),window.ikiToolkit=window.ikiToolkit||{},window.ikiToolkit.activePanels={},window.ikiToolkit.AbstractPanel=function(i,t){"use strict";function e(e,o){function s(t){if(t.preventDefault(),!r.isOpen){var e=i(this);if(e.tooltipster)try{e.tooltipster("close")}catch(i){}r.stopPropagation&&t.stopImmediatePropagation(),r.open()}}this.defaults={animationIn:"transition.slideUpIn",animationOut:"transition.slideDownOut",btnAnimation:!1,roundPosition:!1,toggleClass:"iki-offscreen"};var r=this;if(this.customElement=null,this.stopPropagation=o,this.options=i.extend({},this.defaults,e),this.$body=i("body"),this.$html=i("html"),this.$w=i(t),this.$target=i("#"+this.options.name),window.ikiToolkit.activePanels[this.options.name]=this,this.$w=i(window).on("keydown",n.bind(this)),this.$closeBtn=this.$target.find(".close-btn-wrap"),this._closeBinded=this.close.bind(this),this.openClass="."+this.options.name+"-open",this.$closeBtn.on("click",function(){var t=i(this);t.tooltipster&&t.tooltipster("close"),r._closeBinded()}),this.revSliders=this.$target.find(".rev_slider"),this.revSliders.length&&this.revSliders.revpause(),this.$w.on("iki_mobile_menu_init",function(t,e){i(e).find(r.openClass).on("click",s)}),this.options.blurBg){var a=this.$target.css("background-image");if(a&&"none"!==a){a=a.replace('url("',"").replace('")',"");var c=i('<img class="sr-only">').attr({src:a}),l=i('<canvas class="iki-fs-panel-canvas" id="'+this.options.name+'-canvas">');c.prependTo(r.$target),c.imagesLoaded().done(function(){StackBlur&&StackBlur.image(c[0],l[0],15),l.css({width:"",height:""}),_.defer(function(){c.remove(),r.$target.prepend(l)})})}}this.options.customElement&&void 0!==window.ikiToolkit.panelCustomBlocks[this.options.customElement.name]&&(r.customElement=Object.create(window.ikiToolkit.panelCustomBlocks[this.options.customElement.name]),r.customElement.init(r,this.options.customElement)),i(r.openClass).on("click",s),i(this.options.name+"-close").on("click",function(t){if(t.preventDefault(),r.isOpen){var e=i(this);e.tooltipster&&e.tooltipster("close"),r.stopPropagation&&t.stopImmediatePropagation(),r.close()}}),this.$body.on("iki_fs_panel_open",function(i,t){t===r.options.name&&(r.isAnimating||r.open())}),this.$body.on("iki_fs_panel_close",function(i,t){t===r.options.name&&r.isOpen&&r.close()})}function n(i){27===(i.keyCode||i.which)&&this.isOpen&&this.close()}function o(i){var e=this;e.$body.removeClass("iki-fs-panel-active"),e.isOpen=!1,e.isAnimating=!1,e.$target.addClass(e.options.toggleClass).css("transform",""),e.$html.css({marginRight:"",overflow:""}),e.revSliders.length&&t.requestAnimationFrame(function(){try{this.revSliders.revpause()}catch(i){}}),e.customElement&&e.customElement.onClose(),i.resolve()}function s(t){var e=this,n=i.Deferred();return t&&e.stopPropagation&&t.stopImmediatePropagation(),this.isOpen?(e.isAnimating=!0,i.fn.velocity?e.$target.velocity(e.options.animationOut,{duration:500,display:"block",complete:function(){e._onCloseComplete(n)}}):(e.$target.css("opacity",0),_.defer(function(){e._onCloseComplete(n)}))):n.reject(),n.promise()}function r(i){var e=this;e.isOpen=!0,e.openFirstTime=!0,e.$target.css("transform",""),e.isAnimating=!1,e.revSliders.length&&t.requestAnimationFrame(function(){jQuery(window).trigger("resize");try{this.revSliders.revresume()}catch(i){}}),e.customElement&&e.customElement.onOpen(),i.resolve()}function a(){var i=this;i.isAnimating=!0,i.revSliders.length&&t.requestAnimationFrame(function(){jQuery(window).trigger("resize")})}function c(){var t=i.Deferred(),e=this;return this.$body.addClass("iki-fs-panel-active"),e.$target.removeClass(e.options.toggleClass),i.fn.velocity?e.$target.velocity(e.options.animationIn,{duration:700,display:"block",begin:function(){e._onOpenBegin()},complete:function(){e._onOpenComplete(t)}}):(e.$target.css("opacity",1),e._onOpenBegin(),_.defer(function(){e._onOpenComplete(t)})),t.promise()}return{init:e,open:c,close:s,_keyDownClose:n,_onOpenComplete:r,_onOpenBegin:a,_onCloseComplete:o}}(jQuery,window),window.ikiToolkit=window.ikiToolkit||{},window.ikiToolkit.panelCustomBlocks=window.ikiToolkit.panelCustomBlocks||{},window.ikiToolkit.panelCustomBlocks.search=function(i,t){function e(i,t){this.panel=i,this.data=t,this.$element=this.panel.$target.find(".search-wrapper"),this.$input=this.$element.find(".search-field"),this.DOMElementPresent=!!this.$input.length,this.focusSearch="enabled"===this.data.focus_search}function n(){this.DOMElementPresent&&this.focusSearch&&this.$input.focus()}function o(){}return{init:e,onOpen:n,onClose:o}}(jQuery,window),window.ikiToolkit=window.ikiToolkit||{},window.ikiToolkit.heroSection=window.ikiToolkit.heroSection||{},window.ikiToolkit.heroSection.gallery=function(i,t){"use strict";return{init:function(t){function e(t){_.each(t,function(t,e){i(t).css("transform","")})}t=t||{};var n=this,o={animation:"transition.bounceUpIn",animationDuration:500,stagger:150};this.options=i.extend({},o,t),i(".iki-custom-content-wrap.iki-multiple_images").each(function(){var t=i(this),o=t.find(".gallery-item"),s=t.find(".gallery"),r=t.data("ikiAnimation");o.length&&s.imagesLoaded().always(function(){_.defer(function(){i.fn.velocity?o.velocity(r,{duration:n.options.duration,stagger:n.options.stagger,display:"",complete:function(){e(this)}}):o.css("opacity",1)})})})}}}(jQuery,window),function(i,t){"use strict";window.ikiToolkit=window.ikiToolkit||{},window.ikiToolkit.heroSection=window.ikiToolkit.heroSection||{},window.ikiToolkit.heroSection.heroContent={init:function(){function e(){i.fn.elementInView?s.elementInView({visibleWhenRatio:.2,cb:n,outsideViewCallback:o,onlyOnce:!1}):n()}function n(){"desktop"===window.ikiThemes.State.activeMenu.name&&(l?l&&c&&(h.YTPPlay(),c=!1):(h.YTPlayer(),m.pattern&&h.on("YTPStart",function(){c=!1,d=!0,i('<div id="iki-video-bg-pattern"></div>').css("background-image","url("+m.pattern+")").appendTo(h),window.PubSub.subscribe("iki_state_menu_change",function(i,t){"desktop"===t.activeMenu.name?c&&(h.YTPPlay(),c=!1):c||(h.YTPPause(),c=!0)})}),l=!0))}function o(){!c&&d&&(h.YTPPause(),c=!0)}var s=i("#iki-hero-section"),r=!1,a=i("#iki-hero-bg"),c=!0,l=!1,d=!1,u=!1;window.ikiThemes&&(u=!window.ikiThemes.browserTest.cssFilters);var f=s.data("ikiHero");if(a.length){var h=i("#iki-hero-video-bg"),m=h.data("property"),p=a.data();if(p.ikiBackground&&(p=p.ikiBackground,p.srcs.thumbnail.trim())){var k=i("#iki-hero-thumb"),w=i('<canvas id="iki-hero-canvas">'),g=p.generate_blur,v=p.permanent_blur,$=parseInt(p.blur_strength);k.length&&(i.fn.imagesLoaded?k.imagesLoaded().done(function(){u&&t.StackBlur?(StackBlur.image(k[0],w[0],$),w.css({width:"",height:""}),k.remove(),a.append(w)):k.css("opacity",1).addClass("iki-css-blur iki-css-blur-"+$)}):k.css("opacity",1).addClass("iki-css-blur iki-css-blur-"+$));var b=function(){var t=p.srcs.large;t||(t=p.srcs.medium),t&&i("<img>").attr("src",t).imagesLoaded().done(function(){a.css("background-image","url("+t+")");var e=u?w:k;i.fn.velocity?e.velocity("fadeOut",{duration:1e3,complete:function(){w.remove()}}):e.fadeOut("slow",function(){w.remove()})})};i(window).on("load",function(){r||v||!g||(b(),r=!0)}),_.delay(function(){r||v||!g||(b(),r=!0)},1e4)}h.length&&(i(window).on("load",function(){l||e()}),_.delay(function(){l||e()},1e4));var y={parent:"#iki-hero-section",target:"#site-content",offset:0,duration:1e3},T=i("#iki-scroll-down-indicator");return i.fn.velocity?T.find("a").on("click",function(){var t=window.ikiThemes.State.activeMenu.isSticky?i("#iki-main-nav-wrap").height():0;t+=window.ikiThemes.State.wpAdminBarSize,i(y.target).velocity("scroll",{duration:y.duration,offset:-1*t})}):T.css("display","none"),f&&f.feat_c&&(document.cookie=f.feat_c+"="+f.feat_s+";path=/"),window.ikiToolkit.heroSection.gallery.init(),this}}}}(jQuery,window);